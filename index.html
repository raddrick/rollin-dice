<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{ radd: rollin the dice }</title>
    <link type='text/css' rel='stylesheet' href='/css/dice.css' />
    <script>
      document.addEventListener(
        'DOMContentLoaded',function(){
          var pairs={};
          var params=location.search.substring(1).split('&');
          for (var i=0; i<params.length; i++){
            var p=params[i].split('=');
            pairs[p[0]]=p[1];
          }
          for (var p in pairs){
            rs[p]=pairs[p];
            document.getElementsByClassName(p)[0].value=rs[p];
          }
          rs.roller.update('dice');
        }
      );
    </script>
    <script type='text/template' id='die'>
      <g class='die' transform='translate({{x}} {{y}})'>
          <rect x='0' y='0' height='100' width='100' />
          <circle cx='25' cy='25' r='8' class='4 5 6'/>
          <circle cx='25' cy='50' r='8' class='6'/>
          <circle cx='25' cy='75' r='8' class='2 3 4 5 6'/>
          <circle cx='75' cy='25' r='8' class='2 3 4 5 6'/>
          <circle cx='75' cy='50' r='8' class='6'/>
          <circle cx='75' cy='75' r='8' class='4 5 6'/>
          <circle cx='50' cy='50' r='8' class='1 3 5'/>
          <text x='45' y='120'>{{text}}</text>
        </g>
    </script>
  </head>
  <body>
    <div style='display:none;'>
      <p class="notice"><%= notice %></p>
      <p class="alert"><%= alert %></p>
    </div>
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" xml:space="preserve">
      <foreignObject width="100%" height="400">
        <div class="container content">
          <form method='get' class='settings'>
            <label>Number of groups<input name='groups' class='groups' type='text' /></label><br />
            <label>Number of dice<input name='dice' class='dice' type='text' /></label><br />
            <input type='submit' value='Roll the Dice' />
          </form>
        </div>
      </foreignObject>
      <g id='dice'></g>
    </svg>
  </body>
  <script type="text/javascript" src='/js/smvc.js'></script>
  <script type="text/javascript" src='/js/rolla.js'></script>  
</html>